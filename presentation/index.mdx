import { Cite, Image } from 'spectacle'
import { DarkSlide, CodeSlide, LeftSlide, BgSlide } from './slides'
import RegularComponent from './regular-component'
import { TextImage } from './custom'
import process from '../assets/process.png'
import what from '../assets/what.jpg'
import jserror from '../assets/jserror.png'
import errorType from '../assets/errorType.png'
import onErrorCode from '../assets/errorcode.svg';
import crossscript from '../assets/crossscript.svg'

export default BgSlide

export const textColor = 'white'

# 前端异常监控

<br/>
<br/>

**Zhuo.Li**

---

#### 为什么需要前端监控

---

<TextImage src={what}>
  甲用户: 点击XX按钮之后页面白屏了 
  <br />
  乙用户: 优惠劵消费后，支付金额显示不正确
  <br />
  丙用户：最近页面特别卡，点击tab好久才能反应过来
  <br />
  开发: 我这边没问题呀
  
</TextImage>

---

1. 代码隐藏的逻辑缺陷或错误
2. 浏览器版本(移动设备)差异
3. 用户奇怪的操作
4. 资源, 服务异常
5. ...

---

重现用户行为
快速分析定位  
监测用户页面性能  
智能预警  
保证项目正常运行

---

# 脚本报错

---

<Image src={jserror} />

---

<Image src={errorType} />

---

<Image src={onErrorCode} />

---

<iframe
  src="https://codesandbox.io/embed/7173roxxn1?autoresize=1&expanddevtools=1"
  style={{ width: '80vw', height: '500px', border: 0, minWidth: 1200 }}
  sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"
/>

---
<iframe
  src="https://stackblitz.com/edit/js-denjeb"
  style={{ width: '80vw', height: '500px', border: 0, minWidth: 1200 }}
  sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"
/>
---

#### try catch

---

#### window.onerror

---

#### corossorigin
<Image src={crossscript} />
---

promise async

---

框架自带的错误机制

---

# http 请求错误

---

ajax

---

fetch

---

# 资源加载错误

---

#### source map
[https://www.npmjs.com/package/source-map](https://www.npmjs.com/package/source-map)

---

css 中的资源

---

# 性能监控

---

#### 页面白屏时间

---

#### 页面卡顿时间

---

<Image src={process} />

---

#### 存储
localstorage indexDB 离线缓存 

---

节流

---

上报时间

---

数据压缩

---

日志存储

---

分析 grafana

---

报警

---

跟踪

---

![datboi](https://pbs.twimg.com/media/CkjFUyTXEAEysBY.jpg)

---

<RegularComponent />

---

###### Typography

# Heading 1

## Heading 2

### Heading 3

#### Heading 4

##### Heading 5

###### Heading 6

Standard Text

---

###### Standard List

- Item 1
- Item 2
- Item 3
- Item 4

---

> Example Quote

<Cite>Author</Cite>

---

export default CodeSlide

```javascript
class SuperCoolComponent extends React.Component {
  render() {
    return <p>code slide works in markdown too whaaaaat</p>
  }
}
```

---

export default DarkSlide

export const transition = ['slide']

# Write your Spectacle Presentations in Markdown

## And seamlessly use React Components

**How sweet is that**  
**(super sweet)**

---
